---
title: 身份证号码的一些事
layout: post
date: 2017-09-13 22:30
comments: true
categories:
  - 技术
---

*本文主要介绍身份证号码的组成、15身份证转18位、身份证的校验、以及从身份证怎么判断性别等*

### 身份证号码的组成
[参考百度知道](https://zhidao.baidu.com/question/1817350950858804788.html?qbl=relate_question_0)
- 1~6位为地区代码，其中1、2位数为各省级政府的代码，3、4位数为地、市级政府的代码，5、6位数为县、区级政府代码。如13（河北省）04（邯郸市）29（永年县） 
- 7~14位为出生年月日
- 15~17位为顺序号，是县、区级政府所辖派出所的分配码。其中单数为男性分配码，双数为女性分配码。15/18位身份证号码，第15/17位表示性别，单数表示男性，双数表示女性。
- 18位为效验位（识别码，<a href="#a">计算方法</a>）

<!-- more -->

**15位还是18位身份证位数**

1985年我国实行居民身份证制度，当时签发的身份证号码是15位的，
1999年签发的身份证由于年份的扩展（由两位变为四位）和末尾加了效验码，
就成了18位。这两种身份证号码将在相当长的一段时期内共存。[百度知道](https://zhidao.baidu.com/question/1817350950858804788.html?qbl=relate_question_0)

**<span id="a">JS实现15位转18位</span>**

由上知道，15位与18位的区别在于年份由2位数改为4位数且末尾加了校验码。校验码的规则
如下：
1. 将前面的身份证号码17位数分别乘以不同的系数。
从第一位到第十七位的系数分别为：7－9－10－5－8－4－2－1－6－3－7－9－10－5－8－4－2。
2. 将这17位数字和系数相乘的结果相加
3. 用加出来和除以11，看余数是多少？
4. 余数只可能有0－1－2－3－4－5－6－7－8－9－10这11个数字。
其分别对应的最后一位身份证的号码为1－0－X －9－8－7－6－5－4－3－2。
5. 如果余数是0，第18位就是1；余数是1，第18位就是0，以此类推。
[参考百度知道](http://jingyan.baidu.com/article/22a299b525f9cd9e18376a58.html)


```jsx
/**
 * @param ID string
 * 测试用15位身份号码： 522634520829128
 * 得到18位身份证号码： 522634195208291285
 * 获取17位的加权总和 sum
 * 求得sum 除以 11 的余数
 * 根据余数找到对应的值
 **/
ID15To18 = (ID) =>{
  let prifixYear = 19 // 假设15位的身份证号的年份都是19开头
  let validateCodes = [1, 0, 'x', 9, 8, 7, 6, 5,, 4, 3, 2] // 余数刚好是数组的下标
  let str17 = ID.slice(0, 6) + prifixYear + ID.slice(6)
  let total = str17.split('').reduce((sum, value) => {
      return sum + value
  })

  let str18 = str17 + validateCodes.indexOf(total % 11)

  return str18
}

```

### 身份证号码合法性验证
身份证合法性验证[参看](http://www.cnblogs.com/acmilan/archive/2011/12/26/2301813.html)

### 年龄与性别
```js
  /**
   * @param ID 15位和18位
   * 15位：第15位为性别
   * 18位：第17位代表性别
   * 单数：男
   * 双数：女
   */
  getSexByID = (ID) => {
    let set = 1
    if (ID.length === 18) {
      set = Number(ID.substring(16, 17))
    } else {
      set = Number(ID.substring(14, 15))
    }
    console.log(parseInt(set % 2))
    return parseInt(set % 2)
  }
  
  /**
   * @param ID 15位和18位
   * 15位：第7,8位为年份
   * 18位：7-10位表示年份
   */
  getAgeByID = (ID) => {
    let age = 0,
            curYear = new Date().getFullYear()
    if (ID.length === 18) {
      age = curYear - ID.substring(6, 10)
    } else {
      age = curYear % 100 - ID.substring(6, 8)
    }
    return age
  }

```

