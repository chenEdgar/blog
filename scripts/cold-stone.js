"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js")});const path=location.pathname,navLinkList=Array.from(document.querySelectorAll(".nav-list-item")),navs=["/projects/","/categories/","/tags/","/archives/","/about/","/friends/"];"/"===path||/page/.test(path)?navLinkList[0].classList.add("active"):navs.forEach(function(t,e){if(t===path){const e=navLinkList.find(function(e){return e.dataset.link===t});e&&e.classList.add("active")}}),hljs.initHighlightingOnLoad();const tocLinkList=document.querySelectorAll(".toc-link");tocLinkList.forEach(function(t){const e=t.href.replace(location.origin+"/",location.href);t.setAttribute("href",e)});const loader=document.getElementById("loader"),utteranc=document.getElementById("utteranc");if(utteranc){const t=document.createElement("script");t.async=!0,t.crossOrigin="anonymous",t.src="https://utteranc.es/client.js",t.setAttribute("repo",window.COLD_STONE.repo),t.setAttribute("issue-term","pathname"),t.setAttribute("theme","github-light"),utteranc.appendChild(t);const e=setTimeout(function(){loader.remove(),clearTimeout(e)},3e3)}const back=document.getElementById("back");back&&back.addEventListener("click",function(){history.back()});const backTop=document.getElementById("backTop");backTop&&(window.addEventListener("scroll",()=>{const{scrollTop:t,scrollHeight:e,clientHeight:n}=document.scrollingElement;t+n>=e?backTop.classList.add("show"):backTop.classList.remove("show")}),backTop.addEventListener("click",function(){window.scroll({top:0,left:0,behavior:"smooth"})}));const canvas=document.getElementById("prelude");if(canvas){let t;const e=2,n=18e4,o=window.innerWidth,a=window.innerHeight,i=window.devicePixelRatio,c=canvas.getContext("2d"),s=localStorage.getItem("animatedTime");function init(){canvas.width=o*i,canvas.height=a*i,c.scale(i,i),t=new LeonSans({text:"Cold Stone",color:["#000000"],size:80,weight:200}),requestAnimationFrame(draw)}function draw(e){requestAnimationFrame(draw),c.clearRect(0,0,o,a);const n=(o-t.rect.w)/2,i=(a-t.rect.h)/2;t.position(n,i),t.draw(c)}function animate(){const n=t.drawing.length;for(let o=0;o<n;o++)TweenMax.fromTo(t.drawing[o],e,{value:0},{delay:.05*o,value:1,ease:Power4.easeOut});const o=setTimeout(function(){clearTimeout(o),document.body.removeChild(canvas),localStorage.setItem("animatedTime",Date.now())},1e3*e)}!s||Date.now()>parseInt(s)+n?(init(),animate()):document.body.removeChild(canvas)}